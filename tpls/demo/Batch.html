<div class="tab-pane fade in row active" id="batch"><div class="sub-tab row center-block text-center" ng-if="$parent.isBusLis" ng-class="{'disabled': $parent.isLoading}" ng-disabled="isLoading"><div class="col-sm-4" ng-repeat="item in template track by $index" ng-click="!isLoading && changeTpl($index)" ng-class="{'active': $parent.tplIndex === $index}">{{item.name}}</div></div><div class="col-xs-12"><ul class="thumb-list list-unstyled clearfix"><li class="thumb-item" ng-repeat="item in dataList track by $index" ng-class="{'active': $parent.activeIndex === $index}" ng-click="$parent.activeIndex = $index"><img class="img-responsive" ng-src="{{item.thumbs[item.thumbs.length - 1]}}" alt="preview thumb" ng-if="dataList[$index].files && dataList[$index].files[item.thumbs.length - 1].type.split('/')[0] === 'image'"><div pdf-viewer pdf-src="{{item.thumbs[item.thumbs.length - 1]}}" ng-if="dataList[$index].files && dataList[$index].files[item.thumbs.length - 1].type.split('/')[0] !== 'image'" class="pdf-viewer"></div><span class="count">+ {{item.files.length}}</span></li><li class="tips" ng-if="!dataList.length"><span class="tips-icon"></span>上传图像预览区</li></ul></div><div class="col-xs-6"><div class="main-img"><p ng-if="!dataList[activeIndex].files.length"></p><div ng-if="!isSingleView" class="pandect-view"><div class="sub-thumbs" ng-repeat="item in dataList[activeIndex].thumbs track by $index" ng-class="{'active': dataList[activeIndex].activeIndex === $index}" ng-click="$parent.dataList[activeIndex].activeIndex = $index"><span class="index-num ng-binding">{{$index + 1}}</span><img class="img-responsive" ng-src="{{item}}" ng-if="dataList[activeIndex].files[$index].type.split('/')[0] === 'image'"><div pdf-viewer pdf-src="{{item}}" ng-if="dataList[activeIndex].files[$index].type.split('/')[0] !== 'image'" class="pdf-viewer"></div><span class="zoom-in" title="展开" ng-click="$parent.toSingleView($index)" ng-if="dataList[activeIndex].activeIndex === $index"><i class="fa fa-expand"></i></span><span class="failed" ng-if="dataList[activeIndex].result.mpRecognition.ocrInfoList[$index] && dataList[activeIndex].result.mpRecognition.ocrInfoList[$index].ocrInfo.resCd !== '00000'"></span><span class="delete" ng-click="delete($index)" ng-if="dataList[activeIndex].activeIndex === $index && dataList[activeIndex].result.mpRecognition.ocrInfoList[$index] && dataList[activeIndex].result.mpRecognition.ocrInfoList[$index].ocrInfo.resCd !== '00000'"><i class="fa fa-trash-o"></i></span></div><label class="add-img" ng-if="dataList[activeIndex].files.length < 4"><div class="icon"><i class="fa fa-plus"></i> <span>添加图片{{acceptFileTypes.indexOf('application/pdf') !== -1 ? ' / 文件' : ''}}</span></div><input type="file" class="hide" multiple accept="{{acceptFileTypes.join(',')}}" onchange="angular.element(this).scope().addImg(this)"> <span class="rippleJS"></span></label></div><div ng-if="isSingleView" class="single-view"><img ng-src="{{dataList[activeIndex].thumbs[dataList[activeIndex].activeIndex]}}" ng-if="dataList[activeIndex].files[dataList[activeIndex].activeIndex].type.split('/')[0] === 'image'"><div scale-box ng-if="dataList[activeIndex].files[dataList[activeIndex].activeIndex].type.split('/')[0] !== 'image'"><div pdf-viewer pdf-src="{{dataList[activeIndex].thumbs[dataList[activeIndex].activeIndex]}}" multiple class="pdf-viewer"></div></div><span class="zoom-out" title="折叠" ng-click="toPandect()"><i class="fa fa-compress"></i></span> <span class="delete" ng-click="delete(dataList[activeIndex].activeIndex)" ng-if="dataList[activeIndex].result.mpRecognition.ocrInfoList[dataList[activeIndex].activeIndex].ocrInfo.resCd !== '00000'"><i class="fa fa-trash-o"></i></span></div><div class="loading" ng-if="isLoading"><i class="fa fa-spinner"></i></div></div></div><div class="col-xs-6"><div class="result"><h4 class="title text-center">识别结果</h4><div class="pandect-view" ng-if="dataList.length && !isSingleView && !$parent.isFinSta" ng-include="resolver.pandect"></div><div class="single-view" ng-if="isSingleView || $parent.isFinSta && dataList[activeIndex].result.mpRecognition.ocrInfoList[dataList[activeIndex].activeIndex].ocrInfo.resCd === '00000'" ng-include="resolver.single" ng-attr-modal-map="{{$parent.isFinSta}}"></div><div class="failed" ng-if="isSingleView && dataList[activeIndex].result.mpRecognition.ocrInfoList[dataList[activeIndex].activeIndex].ocrInfo.resCd !== '00000'">{{dataList[activeIndex].result.mpRecognition.ocrInfoList[dataList[activeIndex].activeIndex].ocrInfo.resMsg}}</div><div class="loading" ng-if="isLoading"><span>正在识别...</span></div></div></div><div class="clearfix"></div><div class="file-button col-md-12"><button class="btn config ripple-wrapper" data-toggle="modal" data-target="#regionConfBatch" ng-if="$parent.isIdCard">选择身份证类型<span class="rippleJS"></span></button> <button class="btn config ripple-wrapper" data-toggle="modal" data-target="#fieldConfBatch" ng-click="getConfig()" ng-if="$parent.isVat || $parent.isBusLis">配置识别域<span class="rippleJS"></span></button><label for="batchUp"><div class="btn center-block ripple-wrapper" ng-class="{'disabled': isLoading}">上传本地图片{{acceptFileTypes.indexOf('application/pdf') !== -1 ? ' / 文件' : ''}}<span class="rippleJS"></span></div></label><input type="file" class="trans-input" id="batchUp" multiple accept="{{acceptFileTypes.join(',')}}" onchange="angular.element(this).scope().fileChanged(this)" ng-disabled="isLoading"></div></div><div class="fieldConf modal fade" id="fieldConfBatch" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button><h4 class="modal-title" id="myModalLabel">识别域配置</h4></div><div class="modal-body"><p>说明：</p><p>&nbsp;&nbsp;&nbsp;&nbsp;如果您不配置识别域，我们将默认识别以下选中识别项。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;我们会保存您配置的识别域，识别域无更改的情况下，您无需重新配置。</p><p>选择识别项：</p><label ng-repeat="item in fields[template[tplIndex].value]" ng-if="$parent.isBusLis && item.display"><input type="checkbox" ng-model="item.checked">{{item.name}}</label><label ng-repeat="item in fields" ng-if="$parent.isVat && item.display"><input type="checkbox" ng-disabled="item.required" ng-model="item.checked">{{item.name}}</label></div><div class="modal-footer"><button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="saveConfig()" ng-disabled="saveDisabled">确定</button></div></div></div></div><div class="regionConf modal fade" id="regionConfBatch" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" ng-if="$parent.isIdCard"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button><h4 class="modal-title" id="myModalLabel">选择身份证类型</h4></div><div class="modal-body"><p>说明：如果您没有选择身份证类型，我们将默认身份证为内地居民二代证。</p><br><div class="region clearfix"><div class="radio blue" ng-repeat="item in region.list"><input type="radio" id="region{{item.value}}" name="region" value="{{item.value}}" ng-model="$parent.region.value"><label for="region{{item.value}}">{{item.name}}</label></div></div></div><div class="modal-footer"><button type="button" class="btn btn-primary" data-dismiss="modal">确定</button></div></div></div></div>